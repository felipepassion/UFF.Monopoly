@inherits ComponentBase

@if (_visible)
{
    <div class="bot-toast @(_cssClass)">@Message</div>
}

@code {
    [Parameter] public bool Show { get; set; }
    [Parameter] public string Message { get; set; } = string.Empty;

    private bool _visible;
    private string _cssClass = string.Empty;
    private CancellationTokenSource? _cts;

    protected override void OnParametersSet()
    {
        if (Show)
        {
            _cts?.Cancel();
            _visible = true;
            _cssClass = string.Empty;
        }
        else if (_visible)
        {
            // start hide animation then unmount
            _cts?.Cancel();
            _cts = new CancellationTokenSource();
            _cssClass = "hide";
            var token = _cts.Token;
            _ = Task.Run(async () =>
            {
                try { await Task.Delay(240, token); } catch { return; }
                if (!token.IsCancellationRequested)
                {
                    _visible = false;
                    _cssClass = string.Empty;
                    await InvokeAsync(StateHasChanged);
                }
            });
        }
    }
}

<style>
.bot-toast{background:#0d6efd;color:#fff;border-radius:10px;padding:.5rem .75rem;box-shadow:0 10px 25px rgba(0,0,0,.25);opacity:0;transform:translateY(12px);animation:toastIn .25s ease-out forwards}
.bot-toast.hide{animation:toastOut .25s ease-in forwards}
@@keyframes toastIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@@keyframes toastOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(12px)}}
</style>
